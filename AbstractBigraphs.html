<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>AbstractBigraphs</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library AbstractBigraphs</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Arith</span> <span class="id" title="var">ZArith</span> <span class="id" title="var">Psatz</span> <span class="id" title="var">Bool</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">String</span> <span class="id" title="var">List</span> <span class="id" title="var">Program.Equality</span> <span class="id" title="var">Program.Wf</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Relations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Recdef</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">OrderedType</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Lists.List</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.NArith.NArith</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Strings.String</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Logic.FinFun</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Logic.Decidable</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Lia</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">FunctionalExtensionality</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">PropExtensionality</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Setoids.Setoid</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MyProofs</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">support_for_bigraphs</span>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-parsing".<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Strict</span> <span class="id" title="keyword">Implicit</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Printing</span> <span class="id" title="keyword">Implicit</span> <span class="id" title="var">Defensive</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "parsing".<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">Bigraph</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">IntroBigraphs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">void</span> : <span class="id" title="keyword">Type</span> := .<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">merge</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">la</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">lb</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>) : <span class="id" title="var">list</span> (<span class="id" title="var">A</span> + <span class="id" title="var">B</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map</span> <span class="id" title="var">inl</span> <span class="id" title="var">la</span>) ++ (<span class="id" title="var">map</span> <span class="id" title="var">inr</span> <span class="id" title="var">lb</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">finite</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := { <span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> | <span class="id" title="var">Listing</span> <span class="id" title="var">l</span> }.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <span class="id" title="var">FinDecType</span> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">type</span> :&gt; <span class="id" title="keyword">Type</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_type</span> : <span class="id" title="var">finite</span> <span class="id" title="keyword">type</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dec_type</span> : <span class="id" title="var">EqDec</span> <span class="id" title="keyword">type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">acyclic</span> (<span class="id" title="var">node</span> <span class="id" title="var">site</span> <span class="id" title="var">root</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">parent</span> : <span class="id" title="var">node</span> + <span class="id" title="var">site</span> -&gt; <span class="id" title="var">node</span> + <span class="id" title="var">root</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span>:<span class="id" title="var">node</span>), <span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; <span class="id" title="var">parent</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = (<span class="id" title="var">inl</span> <span class="id" title="var">n'</span>)) <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">acyclic'</span> (<span class="id" title="var">node</span> <span class="id" title="var">site</span> <span class="id" title="var">root</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">parent</span> : <span class="id" title="var">node</span> + <span class="id" title="var">site</span> -&gt; <span class="id" title="var">node</span> + <span class="id" title="var">root</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span>:<span class="id" title="var">node</span>), <span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; <span class="id" title="var">parent</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) = (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>)) <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Port</span> {<span class="id" title="var">kind</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">node</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">control</span> : <span class="id" title="var">node</span> -&gt; <span class="id" title="var">kind</span>) (<span class="id" title="var">arity</span> : <span class="id" title="var">kind</span> -&gt; <span class="id" title="var">nat</span>): <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">vi</span> : <span class="id" title="var">node</span> * <span class="id" title="var">nat</span> | <span class="id" title="keyword">let</span> (<span class="id" title="var">v</span>, <span class="id" title="var">i</span>) := <span class="id" title="var">vi</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">k</span> := <span class="id" title="var">control</span> <span class="id" title="var">v</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <span class="id" title="var">arity</span> <span class="id" title="var">k</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span> &lt; <span class="id" title="var">a</span> }.<br/>

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">bigraph</span>  (<span class="id" title="var">site</span>: <span class="id" title="var">FinDecType</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">innername</span>: <span class="id" title="var">FinDecType</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">root</span>: <span class="id" title="var">FinDecType</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">outername</span>: <span class="id" title="var">FinDecType</span>) : <span class="id" title="keyword">Type</span> := <br/>
&nbsp;&nbsp;<span class="id" title="var">mkBig</span>  <br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">node</span> : <span class="id" title="var">FinDecType</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edge</span> : <span class="id" title="var">FinDecType</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">kind</span> : <span class="id" title="var">FinDecType</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">arity</span> : <span class="id" title="var">kind</span> -&gt; <span class="id" title="var">nat</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">control</span> : <span class="id" title="var">node</span> -&gt; <span class="id" title="var">kind</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parent</span> : <span class="id" title="var">node</span> + <span class="id" title="var">site</span> -&gt; <span class="id" title="var">node</span> + <span class="id" title="var">root</span> ; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">link</span> : <span class="id" title="var">innername</span> + <span class="id" title="var">Port</span> <span class="id" title="var">node</span> <span class="id" title="var">control</span> <span class="id" title="var">arity</span> -&gt; <span class="id" title="var">outername</span> + <span class="id" title="var">edge</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap</span> : <span class="id" title="var">acyclic</span> <span class="id" title="var">node</span> <span class="id" title="var">site</span> <span class="id" title="var">root</span> <span class="id" title="var">parent</span> ;<br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">IntroBigraphs</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">GettersBigraphs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_node</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <span class="id" title="keyword">Type</span> := <br/>
&nbsp;&nbsp;<span class="id" title="var">node</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_edge</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <span class="id" title="keyword">Type</span> := <br/>
&nbsp;&nbsp;<span class="id" title="var">edge</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_kind</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <span class="id" title="keyword">Type</span> := <br/>
&nbsp;&nbsp;<span class="id" title="var">kind</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_arity</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;(<span class="id" title="var">get_kind</span> <span class="id" title="var">bg</span>) -&gt; <span class="id" title="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="id" title="var">arity</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_control</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) <br/>
&nbsp;&nbsp;: <span class="id" title="var">get_node</span> <span class="id" title="var">bg</span> -&gt; (<span class="id" title="var">get_kind</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">control</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_parent</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;(<span class="id" title="var">get_node</span> <span class="id" title="var">bg</span>) + <span class="id" title="var">s</span> -&gt; (<span class="id" title="var">get_node</span> <span class="id" title="var">bg</span>) + <span class="id" title="var">r</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">parent</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_link</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">i</span> + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">bg</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">bg</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">bg</span>) -&gt; <span class="id" title="var">o</span> + <span class="id" title="var">get_edge</span> <span class="id" title="var">bg</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">link</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_nd</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> (<span class="id" title="var">node</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_nf</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> (<span class="id" title="var">node</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_ed</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> (<span class="id" title="var">edge</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_ef</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> (<span class="id" title="var">edge</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_kd</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> (<span class="id" title="var">kind</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_kf</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> (<span class="id" title="var">kind</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_sd</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_sf</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_id</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_if</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_rd</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> <span class="id" title="var">r</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_rf</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> <span class="id" title="var">r</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_od</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">EqDec</span> <span class="id" title="var">o</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">dec_type</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_of</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">finite</span> <span class="id" title="var">o</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">finite_type</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_ap</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">bg</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) : <br/>
&nbsp;&nbsp;<span class="id" title="var">acyclic</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">bg</span>) <span class="id" title="var">s</span> <span class="id" title="var">r</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">bg</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">ap</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">bg</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">GettersBigraphs</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">EquivalenceBigraphs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_arity_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">k1</span>:<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>, <span class="id" title="keyword">let</span> <span class="id" title="var">k2</span> := <span class="id" title="var">bij_k</span>.(<span class="id" title="var">forward</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">k1</span> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">k1</span> = <span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span> <span class="id" title="var">k2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_control_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n1</span>:<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">kind1</span> := <span class="id" title="var">get_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">n1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n2</span> := <span class="id" title="var">forward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span> <span class="id" title="var">n1</span> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">kind2</span> := <span class="id" title="var">get_control</span> <span class="id" title="var">b2</span> <span class="id" title="var">n2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_k</span> <span class="id" title="var">kind1</span> = <span class="id" title="var">kind2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_parent_site_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_s</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_r</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">site1</span>:<span class="id" title="var">s1</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">site2</span> := <span class="id" title="var">forward</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">bij_s</span> <span class="id" title="var">site1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site1</span>)),(<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">root1</span>, <span class="id" title="var">inr</span> <span class="id" title="var">root2</span>  =&gt; <span class="id" title="var">forward</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">root1</span> = <span class="id" title="var">root2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">node1</span>, <span class="id" title="var">inl</span> <span class="id" title="var">node2</span>  =&gt; <span class="id" title="var">forward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span> <span class="id" title="var">node1</span> = <span class="id" title="var">node2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_parent_node_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_r</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n1</span>:<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n2</span> := <span class="id" title="var">bij_n</span>.(<span class="id" title="var">forward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">n1</span> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)),(<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">root1</span>, <span class="id" title="var">inr</span> <span class="id" title="var">root2</span>  =&gt; <span class="id" title="var">forward</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">root1</span> = <span class="id" title="var">root2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">node1</span>, <span class="id" title="var">inl</span> <span class="id" title="var">node2</span>  =&gt; <span class="id" title="var">forward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span> <span class="id" title="var">node1</span> = <span class="id" title="var">node2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_parent_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_s</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_r</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_node_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">bij_n</span> /\ <span class="id" title="var">bigraph_parent_site_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_s</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">bij_n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_link_innername_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_i</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_o</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_e</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">inner1</span>:<span class="id" title="var">i1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">inner2</span> := <span class="id" title="var">forward</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">bij_i</span> <span class="id" title="var">inner1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner1</span>)),(<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span>, <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span>  =&gt; <span class="id" title="var">forward</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_e</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span>, <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>  =&gt;  <span class="id" title="var">forward</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">outer2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_link_port_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_o</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_e</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_p</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>))) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">p1</span>:(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p2</span> := <span class="id" title="var">bij_p</span>.(<span class="id" title="var">forward</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>))) <span class="id" title="var">p1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)),(<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span>, <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span>  =&gt; <span class="id" title="var">forward</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_e</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span>, <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>  =&gt; <span class="id" title="var">forward</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">outer2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bigraph_link_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_i</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_o</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_e</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_p</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>))) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_innername_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_i</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">bij_e</span> /\ <span class="id" title="var">bigraph_link_port_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">bij_e</span> <span class="id" title="var">bij_p</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">bigraph_equality</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">BigEq'</span><br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_s</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_i</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_r</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_o</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_e</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_k</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bij_p</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>)); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">big_arity_eq</span> : <span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_k</span> ; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">big_control_eq</span> : <span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_n</span> <span class="id" title="var">bij_k</span> ; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">big_parent_eq</span> : <span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_s</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">bij_n</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">big_link_eq</span> : <span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_i</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">bij_e</span> <span class="id" title="var">bij_p</span><br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">EquivalenceBigraphs</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">EquivalenceIsRelation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">arity_refl</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">b</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_k</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b</span> <span class="id" title="var">b</span> <span class="id" title="var">bij_k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_arity_equality</span>. &nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bijection_id</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">control_refl</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">b</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_n</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_k</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b</span> <span class="id" title="var">b</span> <span class="id" title="var">bij_n</span> <span class="id" title="var">bij_k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_control_equality</span>. &nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bijection_id</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parent_refl</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">b</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_s</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_r</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_n</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b</span> <span class="id" title="var">b</span> <span class="id" title="var">bij_s</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">bij_n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_equality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_node_equality</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bijection_id</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">pn1</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pn1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pn1</span> | <span class="id" title="var">pr1</span>]; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_site_equality</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bijection_id</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ps1</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ps1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pn1</span> | <span class="id" title="var">pr1</span>]; <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">link_refl</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} (<span class="id" title="var">b</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_i</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_o</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_e</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bij_p</span> := <span class="id" title="var">bijection_id</span>  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b</span> <span class="id" title="var">b</span> <span class="id" title="var">bij_i</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">bij_e</span> <span class="id" title="var">bij_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_equality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_innername_equality</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bijection_id</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">li1</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">li1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lo1</span> | <span class="id" title="var">le1</span>]; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_port_equality</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bijection_id</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">lp1</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lp1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lo1</span> | <span class="id" title="var">le1</span>]; <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bigraph_equality_refl</span> {<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_equality</span> <span class="id" title="var">b</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">BigEq'</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">b</span> <span class="id" title="var">b</span> (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>) (<span class="id" title="var">bijection_id</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">arity_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">control_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">parent_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">link_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">arity_sym</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> (<span class="id" title="var">bij_k</span>) -&gt; <span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_arity_equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">k2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">k1</span> := <span class="id" title="var">bij_k</span>.(<span class="id" title="var">backward</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">k2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">k1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">k1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">control_sym</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> (<span class="id" title="var">bij_n</span>) (<span class="id" title="var">bij_k</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_n</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_control_equality</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intros</span> <span class="id" title="var">n2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_k</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parent_sym</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_s</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_r</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_s</span> <span class="id" title="var">bij_r</span> <span class="id" title="var">bij_n</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_s</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_r</span>)(<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hn</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_node_equality</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2n2</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2n2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pn2</span> | <span class="id" title="var">pr2</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p2n2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">n1</span> := <span class="id" title="var">backward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span> <span class="id" title="var">n2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hn</span> <span class="id" title="var">n1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">pn2'</span> | <span class="id" title="var">pr2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">n1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">bij_r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_site_equality</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">site2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2s2</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2s2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2s2_n</span> | <span class="id" title="var">p2s2_r</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p2s2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">site1</span> := <span class="id" title="var">backward</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">bij_s</span> <span class="id" title="var">site2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">site1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">psn</span> | <span class="id" title="var">psr</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">site1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">bij_s</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">bij_r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">link_sym</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_i</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_o</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_e</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_p</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_i</span> <span class="id" title="var">bij_o</span> <span class="id" title="var">bij_e</span> <span class="id" title="var">bij_p</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_i</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_o</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_e</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_equality</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_innername_equality</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">inner2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l2i2</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2i2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l2p_o</span> | <span class="id" title="var">l2p_i</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l2i2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inner1</span> := <span class="id" title="var">backward</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">bij_i</span> <span class="id" title="var">inner2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hi</span> <span class="id" title="var">inner1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">l1i_o</span> | <span class="id" title="var">l1i_e</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">inner1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">bij_i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_o</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> <span class="id" title="var">bij_o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_e</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_port_equality</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">port</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l2p</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">port</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l2p_o</span> | <span class="id" title="var">l2p_i</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l2p</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1</span> := <span class="id" title="var">backward</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">bij_p</span> <span class="id" title="var">port</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hp</span> <span class="id" title="var">p1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">l1p_o</span> | <span class="id" title="var">l1p_e</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">bij_p</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_o</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> <span class="id" title="var">bij_o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">bij_preserve_equality</span> (<span class="id" title="var">bij_e</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (@<span class="id" title="var">fob_a_eq_a</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bigraph_equality_sym</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">bigraph_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">BigEq'</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_s</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_i</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_r</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_o</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_n</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_e</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_k</span>) (<span class="id" title="var">bijection_inv</span> <span class="id" title="var">bij_p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">arity_sym</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_arity_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">control_sym</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_control_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">parent_sym</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_parent_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">link_sym</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_link_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">arity_trans</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k12</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k23</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b3</span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> (<span class="id" title="var">bij_k12</span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_k23</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_arity_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_k23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_k12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_arity_equality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">k1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">control_trans</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n12</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n23</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k12</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_k23</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b3</span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> (<span class="id" title="var">bij_n12</span>) (<span class="id" title="var">bij_k12</span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_n23</span>) (<span class="id" title="var">bij_k23</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_control_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_n23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_n12</span>) (<span class="id" title="var">bij_k23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_k12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_control_equality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parent_trans</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_s12</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_s23</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">s2</span> <span class="id" title="var">s3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_r12</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_r23</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">r2</span> <span class="id" title="var">r3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n12</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_n23</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_s12</span> <span class="id" title="var">bij_r12</span> (<span class="id" title="var">bij_n12</span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">bij_s23</span> <span class="id" title="var">bij_r23</span> (<span class="id" title="var">bij_n23</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_parent_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_s23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_s12</span>) (<span class="id" title="var">bij_r23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_r12</span>) (<span class="id" title="var">bij_n23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_n12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">H12n</span> <span class="id" title="var">H12s</span>] [<span class="id" title="var">H23n</span> <span class="id" title="var">H23s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_node_equality</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H12n</span> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1n1</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p1n1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1n1_n</span> | <span class="id" title="var">p1n1_r</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p1n1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">n2</span> := <span class="id" title="var">forward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">bij_n12</span> <span class="id" title="var">n1</span>);  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">n2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H23n</span> <span class="id" title="var">n2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2n2</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2n2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2n2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2n2_n</span> | <span class="id" title="var">p2n2_r</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p2n2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inl</span> (<span class="id" title="var">forward</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>) <span class="id" title="var">bij_n23</span> <span class="id" title="var">n2</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">p3n3_n</span> | <span class="id" title="var">p3n3_r</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12n</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23n</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12n</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23n</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_site_equality</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">site1</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H12s</span> <span class="id" title="var">site1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1s</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p1s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1s_n</span> | <span class="id" title="var">p1s_r</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p1s</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12s</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">site2</span> := <span class="id" title="var">forward</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">bij_s12</span> <span class="id" title="var">site1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">site2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H23s</span> <span class="id" title="var">site2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2s2</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site2</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2s2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2s2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2s_n</span> | <span class="id" title="var">p2s_r</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">p2s2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> (<span class="id" title="var">forward</span> <span class="id" title="var">s2</span> <span class="id" title="var">s3</span> <span class="id" title="var">bij_s23</span> <span class="id" title="var">site2</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">p3s_n</span> | <span class="id" title="var">p3s_r</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12s</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23s</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12s</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23s</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">link_trans</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_i12</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_i23</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">i2</span> <span class="id" title="var">i3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_o12</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_o23</span> : <span class="id" title="var">bijection</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_e12</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_e23</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_p12</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_p23</span> : <span class="id" title="var">bijection</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>)) (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b3</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b3</span>))):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">bij_i12</span> <span class="id" title="var">bij_o12</span> (<span class="id" title="var">bij_e12</span>) (<span class="id" title="var">bij_p12</span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">bij_i23</span> <span class="id" title="var">bij_o23</span> (<span class="id" title="var">bij_e23</span>) (<span class="id" title="var">bij_p23</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_i23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_i12</span>) (<span class="id" title="var">bij_o23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_o12</span>) (<span class="id" title="var">bij_e23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_e12</span>) (<span class="id" title="var">bij_p23</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_p12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_equality</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">H12i</span> <span class="id" title="var">H12p</span>] [<span class="id" title="var">H23i</span> <span class="id" title="var">H23p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_innername_equality</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">inner1</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H12i</span> <span class="id" title="var">inner1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l1i</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l1i</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l1i_o</span> | <span class="id" title="var">l1i_e</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l1i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inner2</span> := <span class="id" title="var">forward</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">bij_i12</span> <span class="id" title="var">inner1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H23i</span> <span class="id" title="var">inner2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inner3</span> := <span class="id" title="var">forward</span> <span class="id" title="var">i2</span> <span class="id" title="var">i3</span> <span class="id" title="var">bij_i23</span> <span class="id" title="var">inner2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">inner2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">inner3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l2i</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner2</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">l2i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2i</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l2i_o</span> | <span class="id" title="var">l2i_e</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l2i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner3</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">l3i_o</span> | <span class="id" title="var">l3i_e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12i</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23i</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12i</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23i</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_port_equality</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intros</span> <span class="id" title="var">p1</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H12p</span> <span class="id" title="var">p1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l1p</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l1p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l1p_n</span> | <span class="id" title="var">l1p_r</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l1p</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12p</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2</span> := <span class="id" title="var">forward</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">bij_p12</span> <span class="id" title="var">p1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H23p</span> <span class="id" title="var">p2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p3</span> := <span class="id" title="var">forward</span> (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b3</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b3</span>)) <span class="id" title="var">bij_p23</span> <span class="id" title="var">p2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l2p2</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">l2p2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2p2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l2p2_o</span> | <span class="id" title="var">l2p2_e</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l2p2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12p</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23p</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H12p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H23p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H23p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12p</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H23p</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bigraph_equality_trans</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">bigraph_equality</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">bigraph_equality</span> <span class="id" title="var">b1</span> <span class="id" title="var">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H12</span> <span class="id" title="var">H23</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">BigEq'</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> <span class="id" title="var">b1</span> <span class="id" title="var">b3</span> (<span class="id" title="var">bij_s0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_s</span>) (<span class="id" title="var">bij_i0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_i</span>) (<span class="id" title="var">bij_r0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_r</span>) (<span class="id" title="var">bij_o0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_o</span>) (<span class="id" title="var">bij_n0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_n</span>) (<span class="id" title="var">bij_e0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_e</span>) (<span class="id" title="var">bij_k0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_k</span>) (<span class="id" title="var">bij_p0</span> &lt;<span class="id" title="var">O</span>&gt; <span class="id" title="var">bij_p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">arity_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_arity_eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_arity_eq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">control_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_control_eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_control_eq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">parent_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_parent_eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_parent_eq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">link_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_link_eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">big_link_eq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">bigraph_packed</span> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;<span class="id" title="var">s</span>: <span class="id" title="var">FinDecType</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">i</span>: <span class="id" title="var">FinDecType</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span>: <span class="id" title="var">FinDecType</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">o</span>: <span class="id" title="var">FinDecType</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">big</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">o</span><br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">EquivalenceIsRelation</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">DisjointJuxtaposition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_map_inl</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">la</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">lb</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">la</span> -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">map</span> (@<span class="id" title="var">inl</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Injective_map_NoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">Injective</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_map_inr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">la</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">lb</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">lb</span> -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">map</span> (@<span class="id" title="var">inr</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">lb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hlb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">lb</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">b</span> <span class="id" title="var">lb'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Injective_map_NoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">Injective</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">noDup_app</span> {<span class="id" title="var">A</span>: <span class="id" title="keyword">Type</span>} : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l'</span>) -&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">l'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">H</span> <span class="id" title="var">ndl</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ndl</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">ndl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">NoDup_cons_iff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <span class="id" title="var">x</span>) ; <span class="id" title="tactic">simpl</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">in_app_or</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHndl</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">noDup_merge</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>: <span class="id" title="keyword">Type</span>}: <span class="id" title="keyword">forall</span> (<span class="id" title="var">la</span>: <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">lb</span>: <span class="id" title="var">list</span> <span class="id" title="var">B</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">la</span> -&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">lb</span> -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">merge</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hlb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">merge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">noDup_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> | <span class="id" title="var">b</span>] <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">in_map_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]]. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">in_map_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]]. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">NoDup_map_inl</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">NoDup_map_inr</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">full_merge</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>: <span class="id" title="keyword">Type</span>}: <span class="id" title="keyword">forall</span> (<span class="id" title="var">la</span>: <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">lb</span>: <span class="id" title="var">list</span> <span class="id" title="var">B</span>), <span class="id" title="var">Full</span> <span class="id" title="var">la</span> -&gt; <span class="id" title="var">Full</span> <span class="id" title="var">lb</span> -&gt; <span class="id" title="var">Full</span> (<span class="id" title="var">merge</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span> <span class="id" title="var">fa</span> <span class="id" title="var">fb</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">Full</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> | <span class="id" title="var">b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">merge</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_map</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">Full</span> <span class="id" title="tactic">in</span> <span class="id" title="var">fa</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">fa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">merge</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_map</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">Full</span> <span class="id" title="tactic">in</span> <span class="id" title="var">fb</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">fb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">listing_merge</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}: <span class="id" title="keyword">forall</span> (<span class="id" title="var">la</span>: <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">lb</span>: <span class="id" title="var">list</span> <span class="id" title="var">B</span>), <span class="id" title="var">Listing</span> <span class="id" title="var">la</span> -&gt; <span class="id" title="var">Listing</span> <span class="id" title="var">lb</span> -&gt; <span class="id" title="var">Listing</span> (<span class="id" title="var">merge</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span> [<span class="id" title="var">nda</span> <span class="id" title="var">fa</span>] [<span class="id" title="var">ndb</span> <span class="id" title="var">fb</span>]. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">apply</span> <span class="id" title="var">noDup_merge</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">apply</span> <span class="id" title="var">full_merge</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">finite_sum</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">fa</span> : <span class="id" title="var">finite</span> <span class="id" title="var">A</span>) (<span class="id" title="var">fb</span> : <span class="id" title="var">finite</span> <span class="id" title="var">B</span>) : <span class="id" title="var">finite</span> (<span class="id" title="var">A</span> + <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">fa</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">la</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">fb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">finite</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">merge</span> <span class="id" title="var">la</span> <span class="id" title="var">lb</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">listing_merge</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">EqDec_sum</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">ea</span> : <span class="id" title="var">EqDec</span> <span class="id" title="var">A</span>) (<span class="id" title="var">eb</span> : <span class="id" title="var">EqDec</span> <span class="id" title="var">B</span>) : <span class="id" title="var">EqDec</span> (<span class="id" title="var">A</span> + <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">EqDec</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">xa</span> | <span class="id" title="var">xb</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ya</span> | <span class="id" title="var">yb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">ea</span> <span class="id" title="var">xa</span> <span class="id" title="var">ya</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">eb</span> <span class="id" title="var">xb</span> <span class="id" title="var">yb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">sum_FinDecType</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="var">FinDecType</span>) : <span class="id" title="var">FinDecType</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">type</span> := <span class="id" title="var">A</span> + <span class="id" title="var">B</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dec_type</span> := <span class="id" title="var">EqDec_sum</span> (@<span class="id" title="var">dec_type</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">dec_type</span> <span class="id" title="var">B</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_type</span> := <span class="id" title="var">finite_sum</span> (@<span class="id" title="var">finite_type</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">finite_type</span> <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;A '+++' B" := (<span class="id" title="var">sum_FinDecType</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_dis_arity</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) + (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>)) -&gt; <span class="id" title="var">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">k1</span> := <span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">k2</span> := <span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a1</span> := <span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a2</span> := <span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_arity</span> (<span class="id" title="var">k</span> : <span class="id" title="var">k1</span>+<span class="id" title="var">k2</span>) : <span class="id" title="var">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">k</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">k1'</span> =&gt; <span class="id" title="var">a1</span> <span class="id" title="var">k1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">k2'</span> =&gt; <span class="id" title="var">a2</span> <span class="id" title="var">k2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">new_arity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_dis_control</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) -&gt; ((<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>)+(<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>))%<span class="id" title="keyword">type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c1</span> := <span class="id" title="var">get_control</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c2</span> := <span class="id" title="var">get_control</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n1</span> := <span class="id" title="var">get_node</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n2</span> := <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">k1</span> := <span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">k2</span> := <span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_control</span> (<span class="id" title="var">n</span> : <span class="id" title="var">n1</span>+<span class="id" title="var">n2</span>) : (<span class="id" title="var">k1</span>+<span class="id" title="var">k2</span>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">c1</span> <span class="id" title="var">n1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">n2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">c2</span> <span class="id" title="var">n2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">new_control</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_dis_parent</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>)) + <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s1</span> +++ <span class="id" title="var">s2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; ((@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>)) + <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r1</span> +++ <span class="id" title="var">r2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p1</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p2</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n1pn2</span> := ((@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">s1ps2</span> := (<span class="id" title="var">s1</span> +++ <span class="id" title="var">s2</span>) <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">r1pr2</span> := (<span class="id" title="var">r1</span> +++ <span class="id" title="var">r2</span>) <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_parent</span> (<span class="id" title="var">p</span> : (<span class="id" title="var">n1pn2</span>) + (<span class="id" title="var">s1ps2</span>)) : (<span class="id" title="var">n1pn2</span>) + (<span class="id" title="var">r1pr2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">r1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">s2</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">s2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n2'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">s1</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">s1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">r1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">s2</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">s2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n2'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">new_parent</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_dis_port</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:<span class="id" title="var">Port</span> ((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vi12</span> <span class="id" title="var">P12</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vi12</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] <span class="id" title="var">i12</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_control</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_arity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Port</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">n1</span>, <span class="id" title="var">i12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_control</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_arity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Port</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">n2</span>,<span class="id" title="var">i12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_new_link</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i1</span> +++ <span class="id" title="var">i2</span>)  + <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Port</span> ((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">o1</span> +++ <span class="id" title="var">o2</span>) + <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((@<span class="id" title="var">edge</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">edge</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n1</span> := <span class="id" title="var">get_node</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n2</span> := <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p</span> := <span class="id" title="var">Port</span> (<span class="id" title="var">n1</span> + <span class="id" title="var">n2</span>) <span class="id" title="var">c</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e1</span> := <span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e2</span> := <span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l1</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l2</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_link</span> (<span class="id" title="var">ip</span> : (<span class="id" title="var">i1</span> + <span class="id" title="var">i2</span>) + <span class="id" title="var">p</span>) : (<span class="id" title="var">o1</span> + <span class="id" title="var">o2</span>) + (<span class="id" title="var">e1</span> + <span class="id" title="var">e2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ip</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">i1</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">l1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">i1</span>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">o1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">i2</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">l2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">i2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p</span> =&gt;  <span class="id" title="keyword">let</span> <span class="id" title="var">p'</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p'</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="keyword">match</span> (<span class="id" title="var">l1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">o1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> (<span class="id" title="var">l2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">new_link</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">acyclic_dis_parent_left</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n1</span>: <span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) <span class="id" title="var">n1</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">mk_dis_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n1</span>, <span class="id" title="var">_</span>, <span class="id" title="var">Hindn1'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Acc_intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n1'</span> | <span class="id" title="var">n2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)). &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">p1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_node</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++  <span class="id" title="tactic">injection</span> <span class="id" title="var">Hn1'</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++  <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">acyclic_dis_parent_right</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n2</span>: <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) <span class="id" title="var">n2</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">mk_dis_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) (<span class="id" title="var">inr</span> <span class="id" title="var">n2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n2</span>, <span class="id" title="var">_</span>, <span class="id" title="var">Hindn2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Acc_intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n1'</span> | <span class="id" title="var">n2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p1</span> ; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">p2</span> = <span class="id" title="var">inl</span> <span class="id" title="var">n2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">injection</span> <span class="id" title="var">Hn2'</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_dis_ap</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">acyclic</span> ((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) (<span class="id" title="var">s1</span> + <span class="id" title="var">s2</span>) (<span class="id" title="var">r1</span> + <span class="id" title="var">r2</span>) (<span class="id" title="var">mk_dis_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">acyclic</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">acyclic_dis_parent_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">acyclic_dis_parent_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dis_juxtaposition</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) <br/>
&nbsp;&nbsp;: <span class="id" title="var">bigraph</span> (<span class="id" title="var">s1</span> +++ <span class="id" title="var">s2</span>) (<span class="id" title="var">i1</span> +++ <span class="id" title="var">i2</span>) (<span class="id" title="var">r1</span> +++ <span class="id" title="var">r2</span>) (<span class="id" title="var">o1</span> +++ <span class="id" title="var">o2</span>) :=<br/>
{|<br/>
&nbsp;&nbsp;<span class="id" title="var">node</span> := (@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">edge</span> := (@<span class="id" title="var">edge</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">edge</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">kind</span> := (@<span class="id" title="var">kind</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) +++ (@<span class="id" title="var">kind</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">arity</span> := <span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">control</span> := <span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">parent</span> := <span class="id" title="var">mk_dis_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ; <br/>
&nbsp;&nbsp;<span class="id" title="var">link</span> := <span class="id" title="var">mk_new_link</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> := <span class="id" title="var">mk_dis_ap</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;b1 '||' b2" := (<span class="id" title="var">dis_juxtaposition</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bij_assoc</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">bijection</span> (<span class="id" title="var">A</span> + <span class="id" title="var">B</span> + <span class="id" title="var">C</span>) (<span class="id" title="var">A</span> + (<span class="id" title="var">B</span> + <span class="id" title="var">C</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">mkBijection</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">A</span> + <span class="id" title="var">B</span>) + <span class="id" title="var">C</span>)   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span> + (<span class="id" title="var">B</span> + <span class="id" title="var">C</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">abc</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">abc</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">ab</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ab</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="var">inl</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">a</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="var">inr</span> <span class="id" title="var">b</span> =&gt; ((@<span class="id" title="var">inr</span> <span class="id" title="var">A</span> (<span class="id" title="var">B</span> + <span class="id" title="var">C</span>)) (@<span class="id" title="var">inl</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">abc</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">abc</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">bc</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">bc</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="var">inl</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">b</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="var">inr</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">functional_extensionality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">abc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">abc</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">a</span> | [<span class="id" title="var">b</span> | <span class="id" title="var">c</span>]] ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">functional_extensionality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">abc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">abc</span> <span class="id" title="keyword">as</span> [ [<span class="id" title="var">a</span> | <span class="id" title="var">b</span>] | <span class="id" title="var">c</span>] ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_port_l_assoc</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[[[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] | <span class="id" title="var">n3</span>] <span class="id" title="var">i123</span>] <span class="id" title="var">P123</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P123</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Port</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>, <span class="id" title="var">i123</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>), <span class="id" title="var">i123</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n3</span>), <span class="id" title="var">i123</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_port_r_assoc</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">n1</span> | [<span class="id" title="var">n2</span> | <span class="id" title="var">n3</span>]] <span class="id" title="var">i123</span>] <span class="id" title="var">P123</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P123</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Port</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>), <span class="id" title="var">i123</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n2</span>), <span class="id" title="var">i123</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n3</span>, <span class="id" title="var">i123</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bijection_port_assoc</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>) :  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bijection</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ( <span class="id" title="var">mkBijection</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">mk_port_r_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functional_extensionality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_r_assoc</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_l_assoc</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vi123</span> <span class="id" title="var">P123</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vi123</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n1</span> | [<span class="id" title="var">n2</span> | <span class="id" title="var">n3</span>]] <span class="id" title="var">i123</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P123</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functional_extensionality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_r_assoc</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_l_assoc</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vi123</span> <span class="id" title="var">P123</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vi123</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] | <span class="id" title="var">n3</span>] <span class="id" title="var">i123</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P123</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_outer1</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">outer1</span> : <span class="id" title="var">o1</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer23</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e23</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">outer2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; @<span class="id" title="var">inl</span> <span class="id" title="var">o1</span> (<span class="id" title="var">o2</span>+<span class="id" title="var">o3</span>) <span class="id" title="var">outer1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_outer2</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">outer2</span> : <span class="id" title="var">o2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer23</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e23</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">outer2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; @<span class="id" title="var">inr</span> <span class="id" title="var">o1</span> (<span class="id" title="var">o2</span> + <span class="id" title="var">o3</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; @<span class="id" title="var">inr</span> <span class="id" title="var">o1</span> (<span class="id" title="var">o2</span> + <span class="id" title="var">o3</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_outer3</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">outer3</span> : <span class="id" title="var">o3</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer23</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e23</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">outer2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; @<span class="id" title="var">inr</span> <span class="id" title="var">o1</span> (<span class="id" title="var">o2</span> + <span class="id" title="var">o3</span>) (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3'</span> =&gt; @<span class="id" title="var">inr</span> <span class="id" title="var">o1</span> (<span class="id" title="var">o2</span> + <span class="id" title="var">o3</span>) (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span> <span class="id" title="var">outer3'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_edge1</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">edge1</span> : <span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer23</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e23</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; @<span class="id" title="var">inl</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) + (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) <span class="id" title="var">edge1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt;  <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>) <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_edge2</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">edge2</span> : <span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer23</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e23</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>) = <span class="id" title="var">edge2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>) <span class="id" title="var">edge2</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt;  @<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) + (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; @<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) + (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>) <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_edge3</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">edge3</span> : <span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer23</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e23</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e23</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">edge3</span>) = <span class="id" title="var">edge2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>) <span class="id" title="var">edge3</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt;  @<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) + (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) (<span class="id" title="var">inr</span> <span class="id" title="var">edge3</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inl</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; @<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) + (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>)) (<span class="id" title="var">inr</span> <span class="id" title="var">edge3</span>) = <span class="id" title="var">inr</span> (@<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>) <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p23</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">dis_port_assoc_prop</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p123</span> : <span class="id" title="var">Port</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_control</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prop1</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>) -&gt; <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prop2</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>) -&gt; <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prop3</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b3</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b3</span>) -&gt; <span class="id" title="keyword">Prop</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p12</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="var">prop1</span> <span class="id" title="var">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="var">prop2</span> <span class="id" title="var">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="var">prop3</span> <span class="id" title="var">p3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p123</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="var">prop1</span> <span class="id" title="var">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p23</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p23</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="var">prop2</span> <span class="id" title="var">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="var">prop3</span> <span class="id" title="var">p3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p123</span> <span class="id" title="keyword">as</span> [[[[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] | <span class="id" title="var">n3</span>] <span class="id" title="var">i123</span>] <span class="id" title="var">P123</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P123</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_l_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_l_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_l_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">dis_juxtaposition_port_associative</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_port_equality</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) || <span class="id" title="var">b3</span>)  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bijection_port_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_port_equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12</span> | <span class="id" title="var">p3</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p2</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer1</span> | <span class="id" title="var">edge1</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">set</span> (<span class="id" title="var">p123</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rearrange_match_outer1</span> <span class="id" title="var">p123</span> <span class="id" title="var">outer1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_assoc_prop</span> <span class="id" title="var">p</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span> <span class="id" title="var">prop3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12'</span> | <span class="id" title="var">p3'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer1'</span>|<span class="id" title="var">edge1'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">set</span> (<span class="id" title="var">p123</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rearrange_match_edge1</span> <span class="id" title="var">p123</span> <span class="id" title="var">edge1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_assoc_prop</span> <span class="id" title="var">p</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span> <span class="id" title="var">prop3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12'</span> | <span class="id" title="var">p3'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer1'</span>|<span class="id" title="var">edge1'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer2</span> | <span class="id" title="var">edge2</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">set</span> (<span class="id" title="var">p123</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rearrange_match_outer2</span> <span class="id" title="var">p123</span> <span class="id" title="var">outer2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_assoc_prop</span> <span class="id" title="var">p</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span> <span class="id" title="var">prop3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12'</span> | <span class="id" title="var">p3'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer2'</span>|<span class="id" title="var">edge2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">set</span> (<span class="id" title="var">p123</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rearrange_match_edge2</span> <span class="id" title="var">p123</span> <span class="id" title="var">edge2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_assoc_prop</span> <span class="id" title="var">p</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span> <span class="id" title="var">prop3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12'</span> | <span class="id" title="var">p3'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer2'</span>|<span class="id" title="var">edge2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer3</span> | <span class="id" title="var">edge3</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">p123</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rearrange_match_outer3</span> <span class="id" title="var">p123</span> <span class="id" title="var">outer3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer3'</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer3'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_assoc_prop</span> <span class="id" title="var">p</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span> <span class="id" title="var">prop3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12'</span> | <span class="id" title="var">p3'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer3'</span>|<span class="id" title="var">edge3'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">p123</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>) (<span class="id" title="var">mk_port_l_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rearrange_match_edge3</span> <span class="id" title="var">p123</span> <span class="id" title="var">edge3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">edge3</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">edge3</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p3</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">edge3</span>) = <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_assoc_prop</span> <span class="id" title="var">p</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span> <span class="id" title="var">prop3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <span class="id" title="var">b3</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p12'</span> | <span class="id" title="var">p3'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p3</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer3'</span>|<span class="id" title="var">edge3'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eim1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">dis_juxtaposition_associative</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span> : <span class="id" title="var">FinDecType</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) (<span class="id" title="var">b3</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s3</span> <span class="id" title="var">i3</span> <span class="id" title="var">r3</span> <span class="id" title="var">o3</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_equality</span> ((<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) || <span class="id" title="var">b3</span>) (<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">BigEq'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s1</span> +++ <span class="id" title="var">s2</span> +++ <span class="id" title="var">s3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i1</span> +++ <span class="id" title="var">i2</span> +++ <span class="id" title="var">i3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r1</span> +++ <span class="id" title="var">r2</span> +++ <span class="id" title="var">r3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">o1</span> +++ <span class="id" title="var">o2</span> +++ <span class="id" title="var">o3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s1</span> +++ (<span class="id" title="var">s2</span> +++ <span class="id" title="var">s3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i1</span> +++ (<span class="id" title="var">i2</span> +++ <span class="id" title="var">i3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r1</span> +++ (<span class="id" title="var">r2</span> +++ <span class="id" title="var">r3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">o1</span> +++ (<span class="id" title="var">o2</span> +++ <span class="id" title="var">o3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) || <span class="id" title="var">b3</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> || (<span class="id" title="var">b2</span> || <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">s3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">r3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> <span class="id" title="var">o3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_node</span> <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_assoc</span> (<span class="id" title="var">get_kind</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_kind</span> <span class="id" title="var">b3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bijection_port_assoc</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">b3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_arity_equality</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">k1</span> | <span class="id" title="var">k2</span>] | <span class="id" title="var">k3</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_arity</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_arity</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_control_equality</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] | <span class="id" title="var">n3</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_control</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_control</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_equality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_node_equality</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] | <span class="id" title="var">n3</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n3</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_site_equality</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">site1</span> | <span class="id" title="var">site2</span>] | <span class="id" title="var">site3</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site1</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site2</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site3</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_equality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_innername_equality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">i123</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">inner1</span> | <span class="id" title="var">inner2</span>] | <span class="id" title="var">inner3</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner1</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner2</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b3</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner3</span>)); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">dis_juxtaposition_port_associative</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_port_commu</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] <span class="id" title="var">i12</span>] <span class="id" title="var">P12</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Port</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n1</span>, <span class="id" title="var">i12</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>, <span class="id" title="var">i12</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">P12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">bijection_port_commu</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>) :  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bijection</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ( <span class="id" title="var">mkBijection</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">mk_port_commu</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">mk_port_commu</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functional_extensionality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_commu</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vi12</span> <span class="id" title="var">P12</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vi12</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] <span class="id" title="var">i12</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functional_extensionality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">id</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">funcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_commu</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vi12</span> <span class="id" title="var">P12</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vi12</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] <span class="id" title="var">i12</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">dis_port_commu_prop</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p12</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prop1</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)-&gt; <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prop2</span> : <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>)-&gt; <span class="id" title="keyword">Prop</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="var">prop1</span> <span class="id" title="var">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="var">prop2</span> <span class="id" title="var">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">mk_port_commu</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="var">prop2</span> <span class="id" title="var">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="var">prop1</span> <span class="id" title="var">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p12</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>] <span class="id" title="var">i12</span>] <span class="id" title="var">P12</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P12</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_commu</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_port_commu</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_dis_port</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_outer</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} {<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p21</span>:<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">outer1</span>:<span class="id" title="var">o1</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">edge1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">outer2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; @<span class="id" title="var">inr</span> <span class="id" title="var">o2</span> <span class="id" title="var">o1</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inr</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_outer2'</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} {<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p21</span>:<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">outer2</span>:<span class="id" title="var">o2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">outer2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">edge2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">outer1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">edge1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> = <span class="id" title="var">outer2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; @<span class="id" title="var">inl</span> <span class="id" title="var">o2</span> <span class="id" title="var">o1</span> <span class="id" title="var">outer2</span> = <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> =&gt; @<span class="id" title="var">inl</span> <span class="id" title="var">o2</span> <span class="id" title="var">o1</span> <span class="id" title="var">outer2</span> = <span class="id" title="var">inr</span> <span class="id" title="var">outer1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_edge</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} {<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p21</span>:<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">edge1</span>:<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">o1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1'</span> =&gt; @<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) <span class="id" title="var">edge1'</span> = <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rearrange_match_edge2'</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>} {<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p21</span>:<span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b2</span>) + <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_control</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">get_arity</span> <span class="id" title="var">b1</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">edge2</span>:<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">o1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2'</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge2</span> = <span class="id" title="var">edge2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2'</span> =&gt; @<span class="id" title="var">inl</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) <span class="id" title="var">edge2</span> = <span class="id" title="var">inl</span> <span class="id" title="var">edge2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1'</span> =&gt; @<span class="id" title="var">inr</span> (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) <span class="id" title="var">edge1'</span> = <span class="id" title="var">inl</span> <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p21</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p2</span> | <span class="id" title="var">p1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)). ++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. ++ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">dis_juxtaposition_port_commutative</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_link_port_equality</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bijection_port_commu</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_port_equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P12</span> := <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P21</span> := <span class="id" title="var">Port</span> (<span class="id" title="var">get_node</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)) (<span class="id" title="var">get_control</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)) (<span class="id" title="var">get_arity</span> (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> | <span class="id" title="var">p2</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p21</span>:= <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">mk_port_commu</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer1</span> |<span class="id" title="var">edge1</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rearrange_match_outer</span> <span class="id" title="var">p21</span> <span class="id" title="var">outer1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1'</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inr</span> <span class="id" title="var">outer1'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">outer1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_commu_prop</span> <span class="id" title="var">p12</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer1'</span> |<span class="id" title="var">edge1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rearrange_match_edge</span> <span class="id" title="var">p21</span> <span class="id" title="var">edge1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1'</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">edge1'</span> = <span class="id" title="var">inr</span> <span class="id" title="var">edge1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge1</span> = <span class="id" title="var">inr</span> <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_commu_prop</span> <span class="id" title="var">p12</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer1</span> |<span class="id" title="var">edge1'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p21</span>:= <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b2</span> <span class="id" title="var">b1</span> (<span class="id" title="var">mk_port_commu</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer2</span> |<span class="id" title="var">edge2</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rearrange_match_outer2'</span> <span class="id" title="var">p21</span> <span class="id" title="var">outer2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer1</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> = <span class="id" title="var">inr</span> <span class="id" title="var">outer1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">outer2</span> = <span class="id" title="var">inl</span> <span class="id" title="var">outer2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_commu_prop</span> <span class="id" title="var">p12</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer2'</span> |<span class="id" title="var">edge2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rearrange_match_edge2'</span> <span class="id" title="var">p21</span> <span class="id" title="var">edge2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p1</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge1'</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">edge1'</span> = <span class="id" title="var">inl</span> <span class="id" title="var">edge2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prop2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">edge2'</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">edge2</span> = <span class="id" title="var">inl</span> <span class="id" title="var">edge2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dis_port_commu_prop</span> <span class="id" title="var">p12</span> <span class="id" title="var">prop1</span> <span class="id" title="var">prop2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p1'</span> | <span class="id" title="var">p2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <span class="id" title="var">prop2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">outer2</span> |<span class="id" title="var">edge2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">dis_juxtaposition_commutative</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span> : <span class="id" title="var">FinDecType</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r2</span> <span class="id" title="var">o2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bigraph_equality</span> (<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) (<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">BigEq'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s1</span> +++ <span class="id" title="var">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i1</span> +++ <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r1</span> +++ <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">o1</span> +++ <span class="id" title="var">o2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s2</span> +++ <span class="id" title="var">s1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i2</span> +++ <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r2</span> +++ <span class="id" title="var">r1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">o2</span> +++ <span class="id" title="var">o1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> || <span class="id" title="var">b2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b2</span> || <span class="id" title="var">b1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">bij_sum_comm</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bij_sum_comm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bijection_port_commu</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_arity_equality</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">k1</span> | <span class="id" title="var">k2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_sum_comm</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_control_equality</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_sum_comm</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_equality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_node_equality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n12</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_sum_comm</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_parent_site_equality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s12</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">site1</span> | <span class="id" title="var">site2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_sum_comm</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site1</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">site2</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_equality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">bigraph_link_innername_equality</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i12</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">inner1</span> | <span class="id" title="var">inner2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">bij_sum_comm</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner1</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">inner2</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">dis_juxtaposition_port_commutative</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">DisjointJuxtaposition</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">CompositionBigraphs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_comp_parent</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sum_FinDecType</span> (@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">s2</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sum_FinDecType</span> (@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>)  (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">r1</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p1</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p2</span> := <span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n1pn2</span> := (<span class="id" title="var">sum_FinDecType</span> (@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>)  (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_parent</span> (<span class="id" title="var">p</span> : (<span class="id" title="var">n1pn2</span>) + <span class="id" title="var">s2</span>) : (<span class="id" title="var">n1pn2</span>) + <span class="id" title="var">r1</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r1</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">r1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n2</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2</span>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n2'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r2s1</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">r2s1</span>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n1</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r1</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">r1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">s2</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">s2</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n2</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">n2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r2s1</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">r2s1</span>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">n1'</span> =&gt; <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">r1</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">r1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">new_parent</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_comp_link</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i2</span> + <span class="id" title="var">Port</span> ((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>)  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="var">o1</span> + ((<span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span>) + (<span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n1</span> := <span class="id" title="var">get_node</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n2</span> := <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p</span> := <span class="id" title="var">Port</span> ((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>)  <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e1</span> := <span class="id" title="var">get_edge</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e2</span> := <span class="id" title="var">get_edge</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l1</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l2</span> := <span class="id" title="var">get_link</span> <span class="id" title="var">b2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_link</span> (<span class="id" title="var">ip</span> : <span class="id" title="var">i2</span> + <span class="id" title="var">p</span>) : <span class="id" title="var">o1</span> + (<span class="id" title="var">e1</span> + <span class="id" title="var">e2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ip</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p</span> =&gt;  <span class="id" title="keyword">let</span> <span class="id" title="var">p'</span> := <span class="id" title="var">mk_dis_port</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p'</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">p1</span> =&gt; <span class="id" title="keyword">match</span> (<span class="id" title="var">l1</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p1</span>)) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">o1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">p2</span> =&gt; <span class="id" title="keyword">match</span> (<span class="id" title="var">l2</span> (<span class="id" title="var">inr</span> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o2i1</span> =&gt; <span class="id" title="keyword">match</span> (<span class="id" title="var">l1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">o2i1</span>)) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">o1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">i</span> =&gt;  <span class="id" title="keyword">match</span> <span class="id" title="var">l2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inr</span> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o2i1</span> =&gt; <span class="id" title="keyword">match</span> (<span class="id" title="var">l1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">o2i1</span>)) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inl</span> <span class="id" title="var">o1</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">o1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">e1</span> =&gt; <span class="id" title="var">inr</span> (<span class="id" title="var">inl</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">new_link</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">acyclic_comp_parent_right</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n2</span> : <span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) <span class="id" title="var">n2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">mk_comp_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) (<span class="id" title="var">inr</span> <span class="id" title="var">n2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n2</span>, <span class="id" title="var">_</span>, <span class="id" title="var">Hindn2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Acc_intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_node</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n1'</span> | <span class="id" title="var">n2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_comp_parent</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">p1</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_comp_parent</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p2</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n2'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">p2</span> = <span class="id" title="var">inl</span> <span class="id" title="var">n2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++  <span class="id" title="tactic">injection</span> <span class="id" title="var">Hn2'</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++  <span class="id" title="tactic">set</span> (<span class="id" title="var">p2'</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p2'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p2'</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">acyclic_comp_parent_left</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n1</span>: <span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">get_parent</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) <span class="id" title="var">n1</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">acyclic</span> (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>) <span class="id" title="var">s2</span> <span class="id" title="var">s1</span> (<span class="id" title="var">get_parent</span> <span class="id" title="var">b2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Acc</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> =&gt; (<span class="id" title="var">mk_comp_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n</span>) = <span class="id" title="var">inl</span> <span class="id" title="var">n'</span>) (<span class="id" title="var">inl</span> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">n1</span> <span class="id" title="var">H</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n1</span>, <span class="id" title="var">_</span>, <span class="id" title="var">Hindn1'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Acc_intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n1'</span> | <span class="id" title="var">n2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">mk_comp_parent</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">get_parent</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p1</span> := <span class="id" title="var">parent</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span> (<span class="id" title="var">inl</span> <span class="id" title="var">n1'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">p1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">p1</span> = <span class="id" title="var">inl</span> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">p1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">injection</span> <span class="id" title="var">Hn1'</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hn2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">acyclic_comp_parent_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_comp_ap</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> : <span class="id" title="var">FinDecType</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">acyclic</span> ((<span class="id" title="var">get_node</span> <span class="id" title="var">b1</span>) + (<span class="id" title="var">get_node</span> <span class="id" title="var">b2</span>)) <span class="id" title="var">s2</span> <span class="id" title="var">r1</span> (<span class="id" title="var">mk_comp_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">acyclic</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">n1</span> | <span class="id" title="var">n2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">acyclic_comp_parent_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">acyclic_comp_parent_right</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">composition</span> {<span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> : <span class="id" title="var">FinDecType</span>} <br/>
(<span class="id" title="var">b1</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span>) (<span class="id" title="var">b2</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span>) <br/>
&nbsp;&nbsp;: <span class="id" title="var">bigraph</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> :=<br/>
{|<br/>
&nbsp;&nbsp;<span class="id" title="var">node</span> := <span class="id" title="var">sum_FinDecType</span> (@<span class="id" title="var">node</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) (@<span class="id" title="var">node</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span>); <br/>
&nbsp;&nbsp;<span class="id" title="var">edge</span> := <span class="id" title="var">sum_FinDecType</span> (@<span class="id" title="var">edge</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) (@<span class="id" title="var">edge</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">kind</span> := <span class="id" title="var">sum_FinDecType</span> (@<span class="id" title="var">kind</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">r1</span> <span class="id" title="var">o1</span> <span class="id" title="var">b1</span>) (@<span class="id" title="var">kind</span> <span class="id" title="var">s2</span> <span class="id" title="var">i2</span> <span class="id" title="var">s1</span> <span class="id" title="var">i1</span> <span class="id" title="var">b2</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">arity</span> := <span class="id" title="var">mk_dis_arity</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">control</span> := <span class="id" title="var">mk_dis_control</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">parent</span> := <span class="id" title="var">mk_comp_parent</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ; <br/>
&nbsp;&nbsp;<span class="id" title="var">link</span> := <span class="id" title="var">mk_comp_link</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> := <span class="id" title="var">mk_comp_ap</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> ;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;b1 'o' b2" := (<span class="id" title="var">composition</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">CompositionBigraphs</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">PlaygroundBigraphs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">voidFinite</span> : <span class="id" title="var">finite</span> <span class="id" title="var">void</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">finite</span>. <span class="id" title="tactic">exists</span> []. <span class="id" title="tactic">constructor</span>. + <span class="id" title="tactic">constructor</span>. + <span class="id" title="tactic">unfold</span> <span class="id" title="var">Full</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">voidDec</span> : <span class="id" title="var">EqDec</span> <span class="id" title="var">void</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">EqDec</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">voidFinDecType</span> : <span class="id" title="var">FinDecType</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">type</span> := <span class="id" title="var">void</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_type</span> := <span class="id" title="var">voidFinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dec_type</span> := <span class="id" title="var">voidDec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">unitFinite</span> : <span class="id" title="var">finite</span> <span class="id" title="var">unit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">finite</span>. <span class="id" title="tactic">exists</span> [<span class="id" title="var">tt</span>]. <span class="id" title="tactic">constructor</span>. + <span class="id" title="tactic">apply</span> <span class="id" title="var">NoDup_cons</span>.<br/>
&nbsp;&nbsp;++ <span class="id" title="tactic">intros</span> <span class="id" title="var">contra</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">Full</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">In</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">unitDec</span> : <span class="id" title="var">EqDec</span> <span class="id" title="var">unit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">EqDec</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">unitFinDecType</span> : <span class="id" title="var">FinDecType</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">type</span> := <span class="id" title="var">unit</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_type</span> := <span class="id" title="var">unitFinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dec_type</span> := <span class="id" title="var">unitDec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <span class="id" title="var">acyclic_unit</span> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">acyclic</span> <span class="id" title="var">unitFinDecType</span> <span class="id" title="var">voidFinDecType</span> <span class="id" title="var">unitFinDecType</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">tt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">acyclic</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <span class="id" title="var">vft</span> : <span class="id" title="var">voidFinDecType</span>. <span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">voidFinDecType</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <span class="id" title="var">myUnitBigraph</span> : <span class="id" title="var">bigraph</span> <span class="id" title="var">voidFinDecType</span> <span class="id" title="var">voidFinDecType</span> <span class="id" title="var">unitFinDecType</span> <span class="id" title="var">voidFinDecType</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">node</span> := <span class="id" title="var">unitFinDecType</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edge</span> := <span class="id" title="var">voidFinDecType</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">kind</span> := <span class="id" title="var">unitFinDecType</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">arity</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; 1) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">control</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">tt</span>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parent</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">inl</span> <span class="id" title="var">tt</span>) ; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">link</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">inr</span> <span class="id" title="var">vft</span> ) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap</span> := <span class="id" title="var">acyclic_unit</span> ;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">PlaygroundBigraphs</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Bigraph</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>